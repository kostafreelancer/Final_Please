<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="lancer.mappers.c_projectlistMapper">
	

	<select id="read" resultType="E_Insert">
		select * from project
		where e_pr_num = #{e_pr_num}
	</select> 
	
	<select id="selectEnterprise" resultType="Enterprise">
		select * from Enterprise
		where e_num = #{e_num}
	</select> 
	
	<select id="selectP_job" resultType="Integer">
		SELECT job_id FROM p_job WHERE e_pr_num = #{e_pr_num}
	</select>
	 
	<select id="countPaging" resultType="int">
	<![CDATA[
		select count(e_pr_num) from project where e_pr_num > 0			
	]]>
	</select>
	
	<select id="listSearch" resultType="E_Insert" parameterType="SearchCriteria">
		select * from project
		   <if test="jobs != null">
			<where>
			  <foreach collection="jobs" item="item" separator="AND" open="(" close=")">
			     e_pr_num in (select e_pr_num from p_job where job_id = #{item})
			  </foreach>
			</where>
		  </if> 
		order by e_pr_num desc
	</select>
	
	<select id="listSearchCount" resultType="int" parameterType="SearchCriteria">
	
			select count(e_pr_num)
				from project
			   <if test="jobs != null">
			<where>
			  <foreach collection="jobs" item="item" separator="AND" open="(" close=")">
			     e_pr_num in (select e_pr_num from p_job where job_id = #{item})
			  </foreach>
			</where>
		  </if> 
	</select>
	


</mapper>















